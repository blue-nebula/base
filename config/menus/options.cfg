selectedaspectratio = 1

macro resolution_button [
    ui_button "%1x%2" "screenres %1 %2" [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (& (= $scr_w %1) (= $scr_h %2)) "radioboxon" "") $ui_color_radiobutton_box
]

checkboxdesc = [
    if (= $arg2 1) [
        ui_text $arg1 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $ui_color_checkbox_two
    ] [
        ui_list [
            ui_text $arg1 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $ui_color_checkbox
            ui_text $arg2 "checkbox" 0xFFFFFF 0xFFFFFF -1 1 "checkboxon" $ui_color_checkbox_two
        ]
    ]
]

// OPTIONS MENU
new_ui Options [
    ui_one [
        ui_font "emphasis" [
            ui_button " Display & Graphics" [ show_ui options_menu_graphics ] "" "textures/icons/fontawesome/display_and_graphics.png" // "Display & Graphics" button
            ui_small_spacer
            ui_button " Gameplay" [ show_ui options_menu_gameplay ] "" "textures/icons/fontawesome/gameplay.png" // "Gameplay" button
            ui_small_spacer
            ui_button " User Interface" [ show_ui options_menu_ui ] "" "textures/icons/fontawesome/user_interface.png" // "User Interface" button
            ui_small_spacer
            ui_button " Sound" [ show_ui options_menu_sound ] "" "textures/icons/fontawesome/sound.png" // "Sound" button
            ui_small_spacer
            ui_button " Controls" [ show_ui options_menu_controls ] "" "textures/icons/fontawesome/controls.png" // "Controls" button
            ui_big_spacer
            ui_button " Advanced" [ show_ui advanced_options ] "" "textures/icons/fontawesome/advanced.png" // "Advanced" button
        ]
    ]
    cases $guirollovername "Display & Graphics" [
        ui_tooltip "configure graphical quality settings"
    ] "Gameplay" [
        ui_tooltip "configure display options and resolution"
    ] "User Interface" [
        ui_tooltip "configure user interface and in-game hud settings"
    ] "Sound" [
        ui_tooltip "configure sound and music settings"
    ] "Controls" [
        ui_tooltip "configure controls, keyboard and mouse settings"
    ] "autoexec" [
        ui_tooltip "modify your autoexec.cfg, which is executed every launch"
    ]
    ui_status "select an option to edit your configuration options"
]

setshadersettings = [
    if (= ($arg1 "Low")) [
        shaderdetail 1
    ]

    if (= ($arg2 "High")) [
        shaderdetail 3
    ]
]

// GRAPHICS OPTIONS
new_ui options_menu_graphics [
    ui_header "Display"
    ui_stay_open [
        display_options
    ]

    ui_tab "Graphics" // GRAPHICS TAB
    ui_strut 67 1
    ui_stay_open [
        graphics_options
    ]

    ui_tab "Advanced"
    ui_stay_open [
        advanced_graphics_options
    ]
]

new_ui options_menu_gameplay [
    ui_header "General"
    ui_strut 0.5
    ui_stay_open [
        general_gameplay_options
    ]

    ui_tab "First-Person"
    ui_strut 0.5
    ui_stay_open [
        first_person_options
    ]

    ui_tab "Third-Person"
    ui_strut 0.5
    ui_stay_open [
        third_person_options
    ]

    ui_tab "Advanced"
    ui_strut 0.5
    ui_stay_open [
        advanced_gameplay_options
    ]
]

// USER INTERFACE OPTIONS
new_ui options_menu_ui [
    ui_header "General"
    ui_strut 0.5
    ui_stay_open [
        options_menus_general
    ]

    // Statistics
    ui_tab "Stats"
    ui_strut 0.5
    ui_stay_open [
        options_statistics
    ]

    // Scoreboard
    ui_tab "Scoreboard"
    ui_strut 0.5
    ui_stay_open [
        options_scoreboard
    ]

    // Serverbrowser
    ui_tab "Serverbrowser"
    ui_strut 0.5
    ui_stay_open [
        options_serverbrowser
    ]

    // Radar
    ui_tab "Radar"
    ui_strut 0.5
    ui_stay_open [
        options_radar
    ]

    // Crosshair
    ui_tab "Crosshair"
    ui_strut 0.5
    ui_stay_open [
        options_crosshair
    ]

    // Console
    ui_tab "Console"
    ui_strut 0.5
    ui_stay_open [
        options_console
    ]
]

// CONSOLE OPTIONS
options_console = [
    ui_checkbox "Centered Console" concenter
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_list [
                ui_text "Passive Lines:"
                ui_strut 1
                ui_textfield consize 3
            ]
        ]
        ui_strut 2
        ui_list [
            ui_list [
                ui_text "Overflow Lines:"
                ui_strut 1
                ui_textfield conoverflow 3
            ]
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Font Scale:"
        ui_strut 1
        ui_textfield conscale 5
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Console Opacity:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            conblendstorage = (*f $conblend 100)
            ui_slider conblendstorage 0 100 [ conblend (divf $conblendstorage 100) ]
        ]
    ]
    ui_font "little" [ ui_text "^fadefault: 60% " ]
    ui_strut 0.5
    ui_text "Obituaries"
    ui_list [
        ui_list [
            ui_radiobutton2 "Off"                                 showobituaries 0
            ui_radiobutton2 "Only Me"                             showobituaries 1
            ui_radiobutton2 "Me + Announcements"                  showobituaries 2
            ui_radiobutton2 "Announcements; Exclude Dying Bots"   showobituaries 3
            ui_radiobutton2 "Announcements; Exclude Bot vs. Bot"  showobituaries 4
            ui_radiobutton2 "Everything"                         showobituaries 5
        ]
    ]
    ui_strut 1
    ui_checkbox "Show Obituary Distances" showobitdists
    ui_checkbox "Show Obituary Health Left" showobithpleft
    ui_strut 1
    ui_font "emphasis" [ ui_text "^faChat Console" ]
    ui_bar
    ui_strut 0.5
    ui_list [
        ui_strut 0.5
        ui_checkbox "Show Chat Colors" colourchat [ON]
    ]
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_list [
                ui_text "Passive Lines:"
                ui_strut 1
                ui_textfield chatconsize 3
            ]
        ]
        ui_strut 2
        ui_list [
            ui_list [
                ui_text "Overflow Lines:"
                ui_strut 1
                ui_textfield chatconoverflow 3
            ]
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Font Scale:"
        ui_strut 1
        ui_textfield chatconscale 5
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Console Opacity:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            chatconblendstorage = (*f $chatconblend 100)
            ui_slider chatconblendstorage 0 100 [ chatconblend (divf $chatconblendstorage 100) ]
        ]
    ]
    ui_font "little" [ ui_text "^faDefault: 100% " ]
    ui_strut 0.5
    ui_list [
        ui_text "Text Blink Rate (ms):"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_list_slider textblinking "0 50 100 150 200 250 300 350 400 450 500 550 600 650 700 750 800 850 900 950 1000"
        ]
    ]
    ui_font "little" [ ui_text "^faDefault: 350ms; 0 = Off" ]
    ui_strut 0.5
    ui_list [
        ui_text "Text Intensity:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider textminintensity
        ]
    ]

    ui_font "little" [ ui_text "^faDefault: 32" ]; ui_strut 0.5

    ui_checkbox "Play sound when mentioned in chat" playmentionedsound; ui_strut 0.5

    ui_list [
        ui_checkbox "Show Chat" showchat; ui_strut 0.5
        ui_checkbox "Play Chat Sounds" playchatsounds
    ]
    ui_strut 0.25
    ui_no_hit_fx [
        ui_list [
            ui_image "textures/checkboxon.png" "" 0.5 "" "" "" 0x1CD31C
            ui_font "little" [ ui_text " = Applied In Spectator" ]
        ]
        ui_list [
            ui_image "textures/checkboxon.png" "" 0.5 "" "" "" 0xD31CD3
            ui_font "little" [ ui_text " = Applied In-Game & In Spectator" ]
        ]
    ]
]

// GENERAL OPTIONS
options_menus_general = [
    ui_text "Customize Colors of GUI and Skin Elements:"
    ui_strut 0.5
    ui_loop_split i 3 (getvarinfo -1 1 0 256 128 "gui") [ // all hex colour vars matching gui
        scurvar = (getvarinfo $i 1 0 256 128 "gui")
        s = (stringreplace (stringreplace $scurvar "gui" "") "colour" "")
        ui_button $s [pick_color @scurvar] [] $modeeditingtex $$scurvar
    ] [ui_strut 5]
    ui_strut 1.5
    ui_list [
        ui_list [
            ui_checkbox "Show Menu Tooltips" ui_tooltips
            ui_checkbox "Show Game Hints" ui_status_line
            ui_checkbox "Show Client GPU Info" showloadinggpu
            ui_checkbox "Show Versioning Info" showloadingversion
            ui_checkbox "Show Official Site Link" showloadingurl
        ]
        ui_strut 5
        ui_list [
            ui_text "Fill or Skin Style:"
            ui_radiobutton "Completely Disabled" ui_skinned 0
            ui_radiobutton "Basic Rectangular Fill" ui_skinned 1
            ui_radiobutton "Skin without Border" ui_skinned 2
            ui_radiobutton "Default Skin Style" ui_skinned 3
        ]
    ]
    ui_strut 0.5
    // TOOLTIPS for Menu Options
    ui_font "little" [
        cases $guirollovername "show menu tooltips" [
            ui_text "tip windows will appear when rolling the mouse over some of the game's menu items" "" 0x22FF22 "" 1200
        ] "show game hints" [
            ui_text "a variety of hints relating to everything from gameplay to community will appear below some menus" "" 0x22FF22 "" 1200
        ] "show client GPU info" [
            ui_text "your system graphics processing unit (GPU) information will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
        ] "show versioning info" [
            ui_text "red eclipse legacy client version information will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
        ] "show official site link" [
            ui_text "the current official red eclipse legacy website link will be displayed in the bottom-right corner of the screen in the main menu" "" 0x22FF22 "" 1200
        ]
    ]
    ui_strut 1.5
]

// STATISTICS OPTIONS
options_statistics = [
    ui_list [
        ui_list [
            ui_checkbox "show damage above head" aboveheaddamage
            ui_checkbox "show names above head" aboveheadnames
            ui_strut 0.25
            if $aboveheadnames [
                ui_list [
                    ui_text "names opacity:"
                    ui_spring 1
                    ui_list [
                        ui_strut 25 1
                        aboveheadnamesblendstorage = (*f $aboveheadnamesblend 100)
                        ui_slider aboveheadnamesblendstorage 0 100 [ aboveheadnamesblend (divf $aboveheadnamesblendstorage 100) ]
                    ]
                ]
                ui_list [
                    ui_text "names size:"
                    ui_spring 1
                    ui_list [
                        ui_strut 25 1
                        aboveheadnamessizestorage = (*f $aboveheadnamessize 1)
                        ui_slider aboveheadnamessizestorage 0 10 [ aboveheadnamessize (divf $aboveheadnamessizestorage 1) ]
                    ]
                ]
            ]
            ui_strut 0.5
            ui_text "show icons above head:"
            ui_strut 0.25
            ui_list [
                ui_bitfield "damage & kill events" aboveheadicons 1
                ui_strut 1
                ui_bitfield "affinity pickups (flag, bomb)" aboveheadicons 2
            ]
            ui_list [
                ui_bitfield "weapon pickups" aboveheadicons 4
                ui_strut 5
                ui_checkbox "player teams" aboveheadteam 3 0
            ]
            ui_strut 0.25
            ui_list [
                ui_text "icons opacity:"
                ui_spring 1
                ui_list [
                    ui_strut 25 1
                    aboveheadiconsblendstorage = (*f $aboveheadiconsblend 100)
                    ui_slider aboveheadiconsblendstorage 0 100 [ aboveheadiconsblend (divf $aboveheadiconsblendstorage 100) ]
                ]
            ]
            ui_list [
                ui_text "icons size:"
                ui_spring 1
                ui_list [
                    ui_strut 25 1
                    aboveheadiconssizestorage = (*f $aboveheadiconssize 1)
                    ui_slider aboveheadiconssizestorage 0 10 [ aboveheadiconssize (divf $aboveheadiconssizestorage 1) ]
                ]
            ]
        ]
    ]
    ui_strut 0.5
    ui_text "impulse meter:"
    ui_list [
        ui_radiobutton2 "no impulse shown" inventoryimpulse 0
        ui_strut 1
        ui_radiobutton2 "visual impulse bar" inventoryimpulse 2
        ui_strut 1
        ui_radiobutton2 "textual percentage" inventoryimpulse 1
    ]
    ui_strut 0.5
    ui_text "velocity meter:"
    ui_list [
        ui_radiobutton2 "no velocity shown" inventoryvelocity 0
        ui_strut 1
        ui_radiobutton2 "race mode only" inventoryvelocity 1
        ui_strut 1
        ui_radiobutton2 "always visible" inventoryvelocity 2
    ]
    ui_strut 0.5
    ui_text "on-screen keyboard input:"
    ui_list [
        ui_bitfield "your keys" inventoryinput 1
        ui_strut 1
        ui_bitfield "others' keys (when spectating)" inventoryinput 2
    ]
    ui_strut 0.5
    ui_text "on-screen FPS display:"
    ui_list [
        ui_radiobutton2 "no FPS" showfps 0
        ui_strut 1
        ui_radiobutton2 "show number only" showfps 1
        ui_strut 1
        ui_radiobutton2 "verbose" showfps 2
        ui_strut 1
        ui_radiobutton2 "more verbose" showfps 3
    ]
    ui_text "On-Screen System Time:"
    ui_list [
        ui_radiobutton2 "On" showsystemtime 1
        ui_strut 1
        ui_radiobutton2 "Off" showsystemtime 0
    ]
    ui_strut 0.5
    ui_list [
        ui_text "on-screen notifications:"
        ui_strut 1
        ui_font "little" [ ui_text "^fa(default: level 3)" ]
    ]
    ui_list [
        ui_radiobutton2 "none" shownotices 0
        ui_strut 1
        ui_radiobutton2 "basic only" shownotices 1
        ui_strut 1
        ui_radiobutton2 "level 2" shownotices 2
        ui_strut 1
        ui_radiobutton2 "level 3" shownotices 3
        ui_strut 1
        ui_radiobutton2 "everything" shownotices 4
    ]
    ui_strut 0.5
    ui_list [
        ui_text "top scores:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider inventoryscore 1 8
        ]
    ]
    ui_font "little" [ ui_text (format "^fadefault: %1" (getvardef inventoryscore 1) ) ]
    ui_strut 0.5
    ui_font "little" [
        cases $guirollovername "show damage above head" [
            ui_text "flashing damage counters are displayed above the heads of enemies that receive damage" "" 0x22FF22 "" 1200
        ] "show names above head" [
            ui_text "the names of players and bots are displayed above their heads" "" 0x22FF22 "" 1200
        ] "damage & kill events" [
            ui_text "when a player is hurt or killed, an icon is displayed above their head" "" 0x22FF22 "" 1200
        ] "affinity pickups (flag, bomb)" [
            ui_text "when a player picks up an affinity such as a flag or bomb, an icon is displayed above their head" "" 0x22FF22 "" 1200
        ] "weapon pickups" [
        ui_text "when a player spawns with or picks up a weapon, the specific weapon icons are displayed above their head" "" 0x22FF22 "" 1200
        ] "player teams" [
            ui_text "a team icon is displayed above the head of all players in team matches" "" 0x22FF22 "" 1200
        ] "no impulse shown" [
            ui_text "the impulse meter will never be visible" "" 0x22FF22 "" 1200
        ] "visual impulse bar" [
            ui_text "the impulse meter will be shown as a graphical bar visible on the left side of the screen " "" 0x22FF22 "" 1200
        ] "textual percentage" [
            ui_text "the impulse meter will be shown as a textual percentage visible on the left side of the screen" "" 0x22FF22 "" 1200
        ] "no velocity shown" [
            ui_text "the velocity meter will never be visible" "" 0x22FF22 "" 1200
        ] "race mode only" [
            ui_text "the velocity meter will be visible in race mode only" "" 0x22FF22 "" 1200
        ] "always visible" [
            ui_text "the velocity meter will be visible in all modes" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "your keys" [
            ui_text "toggles visibility of your own keyboard input when playing" "" 0x22FF22 "" 1200
        ] "others' keys (when spectating)" [
            ui_text "toggles visibility of other players' keyboard input when spectating" "" 0x22FF22 "" 1200
        ] "no FPS" [
            ui_text "FPS will not be displayed on the screen" "" 0x22FF22 "" 1200
        ] "show number only" [
            ui_text "frames per second (FPS) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
        ] "verbose" [
            ui_text "FPS (as well as max FPS) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
        ] "more verbose" [
            ui_text "FPS (as well as max FPS & FPS range) will be displayed in the bottom-right corner of the screen" "" 0x22FF22 "" 1200
        ] "none" [
            ui_text "no on-screen notifications will be displayed" "" 0x22FF22 "" 1200
        ] "basic only" [
            ui_text "only the most basic on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
        ] "level 2" [
            ui_text "up to level 2 on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
        ] "level 3" [
            ui_text "up to level 3 on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
        ] "everything" [
            ui_text "all on-screen notifications will be displayed in the center of the screen" "" 0x22FF22 "" 1200
        ]
    ]
    ui_strut 1.5
]

// SCOREBOARD OPTIONS
options_scoreboard = [
    ui_text "customize scoreboard layout:"
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_checkbox "show points" scorepoints
            ui_checkbox "show ip addresses" scoreipinfo
            ui_checkbox "show status icons" scoreicons
            ui_checkbox "show spectators" scorespectators
            ui_checkbox "show account handle" scorehandles
        ]
        ui_strut 2
        ui_list [
            ui_checkbox "show client numbers" scoreclientnum
            ui_checkbox "show hostmasks" scorehostinfo
            ui_checkbox "show ping" scoreping
            ui_checkbox "show packet jump" scorepj
            ui_checkbox "show bot info" scorebotinfo
        ]
    ]
    ui_strut 0.5
    ui_text "show frags:"
    ui_list [
        ui_radiobutton "don't show frags" scorefrags 0
        ui_strut 1
        ui_radiobutton "frags in deathmatch only" scorefrags 1
        ui_strut 1
        ui_radiobutton "frags in all modes" scorefrags 2
    ]
    ui_strut 0.5
    ui_text "show deaths:"
    ui_list [
        ui_radiobutton "don't show deaths" scoredeaths 0
        ui_strut 1
        ui_radiobutton "deaths in deathmatch only" scoredeaths 1
        ui_strut 1
        ui_radiobutton "deaths in all modes" scoredeaths 2
    ]
    ui_strut 0.5
    ui_text "name highlight colour:"
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_background $scorehilight
            ui_strut 6 1
            ui_strut 3
        ]
        ui_strut 1
        ui_list [
            ui_strut 1
            ui_button "(click here to change colour)" [ pick_color scorehilight ] [] "" 0xFFFFFF
            ui_button "(click here to reset default)" [ resetvar scorehilight ] [] "" 0xFFFFFF
        ]
    ]
    ui_strut 0.5
    ui_font "little" [
        cases $guirollovername "show points" [
            ui_text "toggles visibility of total points for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show ip addresses" [
            ui_text "toggles visibility of ip addresses for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show status icons" [
            ui_text "toggles visibility of status icons (dead, alive, queued) for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show spectators" [
            ui_text "toggles visibility of spectating players in the scoreboard" "" 0x22FF22 "" 1200
        ] "show account handle" [
            ui_text "toggles visibility of account handles for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show client numbers" [
            ui_text "toggles visibility of client numbers (abbreviated as cn) for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show hostmasks" [
            ui_text "toggles visibility of hostmasks for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show ping" [
            ui_text "toggles visibility of latency (ping) for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show packet jump" [
            ui_text "toggles visibility of packet jump measurement for each player in the scoreboard" "" 0x22FF22 "" 1200
        ] "show bot info" [
            ui_text "toggles visibility of bot skill levels as well as which player has been assigned to host it locally" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "don't show frags" [
            ui_text "frags will not be visible at all on the scoreboard" "" 0x22FF22 "" 1200
        ] "frags in deathmatch only" [
            ui_text "frags will be visible for each player on the scoreboard in deathmatch mode only" "" 0x22FF22 "" 1200
        ] "frags in all modes" [
            ui_text "frags will be visible for each player on the scoreboard in all modes" "" 0x22FF22 "" 1200
        ] "don't show deaths" [
            ui_text "deaths will not be visible at all on the scoreboard" "" 0x22FF22 "" 1200
        ] "deaths in deathmatch only" [
            ui_text "deaths will be visible for each player on the scoreboard in deathmatch mode only" "" 0x22FF22 "" 1200
        ] "deaths in all modes" [
            ui_text "deaths will be visible for each player on the scoreboard in all modes" "" 0x22FF22 "" 1200
        ]
    ]
    ui_strut 1.5
    ui_status (format "the scoreboard can be accessed in-game by pressing %1" (dobindsearch showscores) )
]

// Serverbrowser Options
options_serverbrowser = [
    ui_text "Update Interval (in seconds):"
    ui_strut 0.2
    
    ui_list [
        ui_center_z [ 
            ui_radiobutton "1" serverupdateinterval 1
            
            ui_strut 0.75
            
            ui_radiobutton "5" serverupdateinterval 5
            
            ui_strut 0.75
            
            ui_radiobutton "15" serverupdateinterval 15
            
            ui_strut 0.75
            
            ui_radiobutton "30" serverupdateinterval 30
            
            ui_strut 0.75
            
            ui_radiobutton "60" serverupdateinterval 60
            
            ui_strut 0.75
        ]
        
    ]
    
    ui_strut 0.4

    ui_checkbox (format "^fc%1" "Show Server Version") serverbrowser_show_server_platform_and_branch // show_server_platform_and_branch checkbox
    ui_strut 0.5
    ui_checkbox (format "^fy%1" "Show Server Sort Options") showserversortoptions
    ui_strut 0.5
    ui_checkbox (format "^fo%1" "Hide Incompatible Servers") hideincompatibleservers
]

// RADAR OPTIONS
options_radar = [
    ui_list [
        ui_list [
            ui_checkbox2 "show radar" showradar 1
            ui_checkbox2 "show items" radaritems 1
            ui_checkbox2 "show players" radarplayers 1
        ]
        ui_strut 2
        ui_list [
            ui_checkbox2 "show affinities" radaraffinity 1
            ui_checkbox2 "show item names" radaritemnames 1
            ui_checkbox2 "show player names" radarplayernames 1
        ]
    ]
    ui_strut 0.25
    ui_no_hit_fx [
        ui_list [
            ui_image "textures/checkboxon.png" "" 0.5 "" "" "" 0x1CD31C
            ui_font "little" [ ui_text " = visible in-game" ]
        ]
        ui_list [
            ui_image "textures/checkboxon.png" "" 0.5 "" "" "" 0xD31CD3
            ui_font "little" [ ui_text " = visible in-game & in specTV" ]
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "radar style"
        ui_strut 1
        ui_font "little" [ ui_text "^fa(default: compass-distance)" ]
    ]
    ui_list [
        ui_radiobutton2 "compass" radarstyle 0
        ui_strut 1
        ui_radiobutton2 "compass-distance" radarstyle 1
        ui_strut 1
        ui_radiobutton2 "full-hud" radarstyle 2
        ui_strut 1
        ui_radiobutton2 "corner" radarstyle 3
    ]
    ui_strut 0.5
    ui_text "filter radar by:"
    ui_list [
        ui_radiobutton2 "off" radarplayerfilter 0
        ui_strut 1
        ui_radiobutton2 "non-team only" radarplayerfilter 1
        ui_strut 1
        ui_radiobutton2 "team only" radarplayerfilter 2
        ui_strut 1
        ui_radiobutton2 "duel/survivor/edit only" radarplayerfilter 3
    ]
    ui_strut 0.5
    if (< $radarstyle 3) [
        ui_list [
            ui_text "radar opacity:"
            ui_spring 1
            ui_list [
                ui_strut 25 1
                radarblendstorage = (*f $radarblend 100)
                ui_slider radarblendstorage 0 100 [ radarblend (divf $radarblendstorage 100) ]
            ]
        ]
    ] [
        ui_list [
            ui_text "radar corner opacity:"
            ui_spring 1
            ui_list [
                ui_strut 25 1
                radarcornerblendstorage = (*f $radarcornerblend 100)
                ui_slider radarcornerblendstorage 0 100 [ radarcornerblend (divf $radarcornerblendstorage 100) ]
            ]
        ]
    ]
    ui_list [
        ui_text "radar detect distance:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            radardiststorage = (*f $radardist 0.1 )
            ui_slider radardiststorage 0 300 [ radardist (divf $radardiststorage 0.1 ) ]
        ]
    ]
    ui_strut 0.5
    ui_font "little" [
        cases $guirollovername "show radar" [
            ui_text "toggles visibility of the radar" "" 0x22FF22 "" 1200
        ] "show affinities" [
            ui_text "toggles visibility of affinity blips (bomb, flag)" "" 0x22FF22 "" 1200
        ] "show items" [
            ui_text "toggles visibility of item blips" "" 0x22FF22 "" 1200
        ] "show item names" [
            ui_text "toggles visibility of item names" "" 0x22FF22 "" 1200
        ] "show players" [
            ui_text "toggles visibility of player blips" "" 0x22FF22 "" 1200
        ] "show player names" [
            ui_text "toggles visibility of player names" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "compass" [
            ui_text "compass styled radar showing the direction of targets (classic style)" "" 0x22FF22 "" 1200
        ] "compass-distance" [
            ui_text "compass styled radar showing the direction and relative distance of targets" "" 0x22FF22 "" 1200
        ] "full-hud" [
            ui_text "compass styled radar showing the direction and relative distance of targets with overlaid points of interest" "" 0x22FF22 "" 1200
        ] "corner" [
            ui_text "top-down view styled radar in the top-right corner of the screen showing actual positions of targets" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername "off" [
            ui_text "no filters applied to radar" "" 0x22FF22 "" 1200
        ] "non-team only" [
            ui_text "radar is filtered to show only enemy teams (or enemies in Free-for-All)" "" 0x22FF22 "" 1200
        ] "team only" [
            ui_text "radar is filtered to show only your own team members" "" 0x22FF22 "" 1200
        ] "duel/survivor/edit only" [
            ui_text "radar is filtered to show only in the duel and survivor mutators, and edit mode" "" 0x22FF22 "" 1200
        ]
        ui_strut 1.5
    ]
]

// CROSSHAIR OPTIONS
options_crosshair = [
    ui_text "show crosshair:"
    ui_list [
        ui_radiobutton2 "disable crosshair" showcrosshair 0
        ui_strut 1
        ui_radiobutton2 "normal crosshair" showcrosshair 1
        ui_strut 1
        ui_radiobutton2 "blend crosshair by accuracy" showcrosshair 2
    ]
    ui_strut 0.5
    ui_text "weapon crosshairs:"
    ui_list [
        ui_radiobutton2 "off" crosshairweapons 0
        ui_strut 1
        ui_radiobutton2 "specific to weapon" crosshairweapons 1
        ui_strut 1
        ui_radiobutton2 "weapon colour only" crosshairweapons 2
        ui_strut 1
        ui_radiobutton2 "specific to weapon & colour" crosshairweapons 3
    ]
    ui_strut 0.5
    ui_text "weapon ammo/clip surrounding crosshair:"
    ui_list [
        ui_radiobutton2 "no visible clip" showclips 0
        ui_strut 1
        ui_radiobutton2 "show solid bar of clip" showclips 1
        ui_strut 1
        ui_radiobutton2 "show individual clip" showclips 2
    ]
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_checkbox2 "critical flash" crosshairflash
            ui_checkbox2 "show crosshair distance (edit only)" crosshairdistance
        ]
    ]
    ui_strut 0.5
    ui_text "crosshair textures, size, opacity:"
    ui_strut 0.5
    ui_list [
        ui_list [
            ui_image $crosshairtex [show_ui options_xhair] 2 1 "textures/nothumb" [crosshairtex "crosshairs/cross-01"]
        ]
        ui_strut 1
        ui_list [
            ui_font "little" [ ui_text (stringreplace $crosshairtex "crosshairs/" "") ]
        ]
    ]
    ui_strut 0.5
    ui_font "little" [
        cases $guirollovername "disable crosshair" [
            ui_text "disable visibility of the crosshair" "" 0x22FF22 "" 1200
        ] "normal crosshair" [
            ui_text "displays a normal crosshair" "" 0x22FF22 "" 1200
        ] "blend crosshair by accuracy" [
            ui_text "displays a normal crosshair that blends depending on your current accuracy" "" 0x22FF22 "" 1200
        ] "off" [
            ui_text "disable weapon-specific crosshairs" "" 0x22FF22 "" 1200
        ] "specific to weapon" [
            ui_text "displays a crosshair that changes form depending on the weapon you are using" "" 0x22FF22 "" 1200
        ] "weapon colour only" [
            ui_text "displays a normal crosshair that is coloured by the weapon you are using" "" 0x22FF22 "" 1200
        ] "specific to weapon & colour" [
            ui_text "displays a crosshair that changes form and colour depending on the weapon you are using" "" 0x22FF22 "" 1200
        ] "no visible clip" [
            ui_text "no clip surrounding the crosshair is displayed" "" 0x22FF22 "" 1200
        ] "show solid bar of clip" [
            ui_text "a solid bar of clip is displayed in a circular fashion around the crosshair" "" 0x22FF22 "" 1200
        ] "show individual clip" [
            ui_text "individual shots of clip are displayed in a circular fashion around the crosshair" "" 0x22FF22 "" 1200
        ] "critical flash" [
            ui_text "crosshair flashes red when your health has reached a critical point" "" 0x22FF22 "" 1200
        ] "show crosshair distance (edit only)" [
            ui_text "shows the distance to the geometry you are currently aiming at (this is only available in editing mode)" "" 0x22FF22 "" 1200
        ]
        cases $guirollovername $crosshairtex [
            ui_text "click here to change the crosshair textures, size & opacity (right click to reset texture)" "" 0x22FF22 "" 1200
        ]
    ]
    ui_strut 1.5
]


new_ui options_xhair [
    ui_header "Crosshair"
    ui_stay_open [
        ui_center [
            ui_button "normal" [ xhairprefix = "crosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "crosshair") "radioboxon" "") $ui_color_radiobutton_box
            ui_strut 1
            ui_button "hit"  [ xhairprefix = "hithair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "hithair") "radioboxon" "") $ui_color_radiobutton_box
            ui_strut 1
            ui_button "zoom" [ xhairprefix = "zoomcrosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "zoomcrosshair") "radioboxon" "") $ui_color_radiobutton_box
            ui_strut 1
            ui_button "team" [ xhairprefix = "teamcrosshair" ] [] "radiobox" 0xFFFFFF 0xFFFFFF -1 1 (? (=s $xhairprefix "teamcrosshair") "radioboxon" "") $ui_color_radiobutton_box
        ]
        xhairtex = (concatword $xhairprefix "tex")
        xhairblend = (concatword $xhairprefix "blend")
        xhairblendstorage = (concatword $xhairprefix "blendstorage")
        xhairsize = (concatword $xhairprefix "size")
        ui_strut 0.5
        ui_list [
            ui_strut $crosshairsboxlen 1
            numcrosshairs = (listlen $crosshairlist)
            crosshairindex = (min (max 0 (- $numcrosshairs $crosshairsboxlen)) $crosshairindex)
            ui_list [
                ui_strut 35 1
                loop i $crosshairsboxlen [
                    q = (+ $crosshairindex $i)
                    curcrosshair = (at $crosshairlist $q)
                    crosshairname = (concatword "crosshairs/" $curcrosshair)
                    ui_body [
                        ui_list [
                            ui_strut 35 1
                            ui_strut 0.3
                            ui_list [
                                ui_image $crosshairname [] 1.5 1
                                ui_strut 1
                                ui_list [
                                    ui_strut 1
                                    ui_button (format "%1%2" (? (=s $$xhairtex $crosshairname) "^fy" "^fa") $curcrosshair)
                                ]
                            ]
                            ui_strut 0.3
                        ]
                    ] [ ($xhairtex @crosshairname) ]
                ]
            ]
            ui_slider crosshairindex 0 (max 0 (- $numcrosshairs $crosshairsboxlen)) [] 1 1
        ]
        ui_strut 1
        if (&& (!=s $xhairprefix "hithair") (!=s $xhairprefix "teamcrosshair")) [
            ui_list [
                ui_text "crosshair opacity:"
                ui_spring 1
                ui_list [
                    ui_strut 20 1
                    $xhairblendstorage = (*f $$xhairblend 100)
                    ui_slider $xhairblendstorage 0 100 [ ($xhairblend (divf $$xhairblendstorage 100)) ]
                ]
            ]
            ui_font "little" [ ui_text (format "^fadefault: %1" (getsvardef $xhairblend 1) ) ]
            ui_strut 0.5
            ui_list [
                ui_text "crosshair size:"
                ui_strut 1
                ui_textfield $xhairsize 6
            ]
            ui_font "little" [ ui_text (format "^fadefault: %1" (getsvardef $xhairsize 1) ) ]
        ] [ ui_strut 4.5 ]
    ]
] [
    if (= $guipasses 0) [
        crosshairlist = ""
        crosshairsboxlen = 5
        xhairprefix = "crosshair"
        xhairtex = (concatword $xhairprefix "tex")
        xhairblend = (concatword $xhairprefix "blend")
        xhairblendstorage = (concatword $xhairprefix "blendstorage")
        xhairsize = (concatword $xhairprefix "size")

        loopfiles crosshairs crosshairs png [
            crosshairlist = (concat $crosshairlist $crosshairs)
        ]
        crosshairlist = (sortlist $crosshairlist a b [<s $a $b])
        crosshairindex = (max 0 (listfind mcurcrosshair $crosshairlist [stringcmp (concatword "crosshairs/" $mcurcrosshair) $$xhairtex]))
    ]
]

// SOUND OPTIONS
new_ui options_menu_sound [
    ui_header "General"
    ui_list [
        sound_options
    ]

    ui_tab "Advanced"
    ui_strut 0.5
    ui_stay_open [
        advanced_sound_options
    ]
]


bindtypes = [ default spectator editing waiting ]
bindcalls = [ "" spec edit wait ]

bindactions = [
    forward backward left right
    "primary" "secondary" "reload" "jump" "crouch" "special" "universaldelta 1" "universaldelta -1"
    "weapon 1" "weapon 2" "weapon 3" "weapon 4" "weapon 5" "weapon 6" "weapon 7" "weapon 8" "weapon 9" "weapon 10"
    walk use drop affinity
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
    "show_ui help" edittoggle "show_ui maps 1" "show_ui maps 2" "showservers" "show_ui profile 2"
    "show_ui team" "show_ui clients"  thirdpersonswitch toggleconsole screenshotnohud screenshot
    "spectate 1" addbot delbot
]
bindtitles = [
    forward backward left right
    "primary" "secondary" "reload" "jump" "crouch" "parkour/kick" "next weapon" "previous weapon"
    "weap slot 1" "weap slot 2" "weap slot 3" "weap slot 4" "weap slot 5" "weap slot 6" "weap slot 7" "weap slot 8" "weap slot 9" "weap slot 10"
    walk "use / pick up" "drop weapon" "throw flag/bomb"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "clients menu" "toggle thirdperson" "toggle console" "screenshot no hud" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

specbindactions = [
    forward backward left right "universaldelta 1" "universaldelta -1"
    specmodeswitch [if (! $isonline) [sv_gamespeed 10000; onrelease [sv_gamespeed 100]]] "spectate 0"
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
    "show_ui help" edittoggle "show_ui maps 1" "show_ui maps 2" "showservers" "show_ui profile 2"
    "show_ui team" "setpriv 1"  thirdpersonswitch toggleconsole screenshot
    "spectate 1" addbot delbot
]
specbindtitles = [
    forward backward left right "watch next player" "watch previous player"
    "toggle TV mode" "fast forward (offline)" "exit spectator"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "claim privileges" "toggle thirdperson" "toggle console" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

waitbindactions = [
    forward backward left right "universaldelta 1" "universaldelta -1" "spectate 1"
    waitmodeswitch
    "saycommand /" "saytextcommand (getsaycolour)" "sayteamcommand (getsaycolour)"
    "show_ui help" edittoggle "show_ui maps 1" "show_ui maps 2" "showservers" "show_ui profile 2"
    "show_ui team" "setpriv 1"  thirdpersonswitch toggleconsole screenshot
    "spectate 1" addbot delbot
    "showcompass voice" "showcompass team" [if (&& (! (& (mutators) $mutsbitffa)) (!= (gamemode) 6)) [showcompass bot]]
]
waitbindtitles = [
    forward backward left right "scroll up" "scroll down" "enter spectator"
    "switch wait TV mode"
    "cmd input" "all chat" "team chat"
    "voice compass" "team compass" "bot compass"
    "help menu" "toggle editing" "maps menu" "show votes menu" "server menu" "loadout menu"
    "team menu" "claim privileges" "toggle thirdperson" "toggle console" "screenshot"
    "enter spectator" "add bot" "delete bot"
]

editbindactions = [
    "showtexgui" edittoggle "show_ui edit" "remip" "fullbright 0; patchlight"
    "fullbright 0; quicklight" "fullbright 0; calclight 1" savemap "changeoutline 1"
    [showcompass editing] [show_ui materials] [if $blendpaintmode paintblendmap editdrag]
    [if $blendpaintmode rotateblendbrush editextend] selcorners  "universaldelta 1" "universaldelta -1"
    cancelsel entcancel editdel editcopy editpaste editcut editflip
    gettex entlink selentedit "entselect insel"
    "undo; passthroughsel 0" redo getmap sendmap
    "domodifier 1" "domodifier 2" "domodifier 3" "domodifier 4" "domodifier 6" "domodifier 9"
    "domodifier 10; onrelease entautoview" togglegrid
    [fullbright (= $fullbright 0); if (= $fullbright 0) [echo fullbright OFF] [ echo fullbright ON]]
    [showmat (= $showmat 0); if (= $showmat 0) [echo showmat OFF] [ echo showmat ON]]
    [outline (= $outline 0); if (= $outline 0) [echo outline OFF] [ echo outline ON]]
    [allfaces (= $allfaces 0); if (= $allfaces 0) [echo allfaces OFF] [ echo allfaces ON]]
    [hmapedit 0;
    blendpaintmode (? (= $blendpaintmode (getvarmax blendpaintmode)) 0 (+ $blendpaintmode 1))
    echo (concatword "^fgblend mode:^fw " (at $paintmodes $blendpaintmode) " (^fc" $blendpaintmode "^fw)")]
    "hmapedit (! $hmapedit); blendpaintmode 0"
    "hmapedit 0; blendpaintmode 0"
]
editbindtitles = [
    "texture menu"  "toggle editing" "editing menu" "remip" "patch lights"
    "quick calclight" "full calclight" "save map" "change outline"
    "editing compass" "materials menu" "select faces" "extend selection" "select corners" "pull cubes" "push cubes"
    "deselect all" "deselect ents" "delete ents, geometry" "copy selection" "paste" "cut/paste on release" "flip geometry"
    "grab texture" "link entities" "edit selected ent" "pick ents in selection"
    undo redo "get map from server" "send map to server"
    "change grid size" "push/pull cube face" "push/pull cube corner" "rotate" "cycle textures" "cycle heightmap brush" "view selected ents"
    "cycle paste grid"  "toggle full bright" "toggle materials" "toggle outline" "toggle all faces"
    "toggle blendmap mode" "toggle heightmap" "quit blend/heightmap"
]

curbindtype = 0
curbindshow = 1

new_ui resetcontrols [
    ui_header "Reset Controls"
    ui_font "emphasis" [ ui_center [ ui_text "RESTORE DEFAULT CONTROLS" ] ]
    ui_strut 0.5
    ui_center [ ui_text "You are about to restore the Red Eclipse Legacy default keyboard binds." ]
    ui_strut 0.25
    ui_font "little" [
        ui_center [ ui_text "Keys that have not been bound to a function by default will remain unchanged." ]
        ui_center [ ui_text "If you wish to restore only a single bind, you must close Red Eclipse Legacy, open the user" ]
    ui_center [ ui_text "config file in the home folder (config.cfg), delete the appropriate entry, then save." ]
    ]
    ui_strut 0.5
    ui_center [ ui_text "Are you sure you wish to continue?" ]
    ui_strut 0.5
    ui_center [ ui_stay_open [
        ui_button "^fgYES, continue" [exec config/setup.cfg; clear_ui 1]
        ui_spring 1
        ui_button "^foNO, go back" [clear_ui 1]
    ] ]
]

// CONTROLS OPTIONS MENU
new_ui options_menu_controls [
    ui_header "Keys"
    keyboard_options

    ui_tab "Mouse"
    mouse_options

    ui_tab "Advanced"
    ui_visible_tab [ ui_stay_open [
        advanced_control_options
    ] ]
] [
    if (= $guipasses 0) [ curbindtype = 0; curkey = "" ]
]

newgui resolution_selector [
    ui_header "Resolution"
    ui_strut 25 1
        
    ui_list [
        ui_list [
            ui_text        "Aspect Ratio";                     ui_strut 0.25
            ui_radiobutton "^fa4:3"    selectedaspectratio 0;  ui_strut 0.1
            ui_radiobutton "^fa16:10"  selectedaspectratio 1;  ui_strut 0.1
            ui_radiobutton "^fa16:9"   selectedaspectratio 2;  ui_strut 0.1
            ui_radiobutton "^fa5:4"    selectedaspectratio 3;  ui_strut 0.1
            ui_radiobutton "^fa5:3"    selectedaspectratio 4;  ui_strut 0.1
            ui_radiobutton "^faCustom" selectedaspectratio -1
        ]
        
        ui_spring 1
        
        ui_list [
            ui_text "Resolution"; ui_strut 0.25
            
            case $selectedaspectratio 0 [ // 4:3
                @(resolution_button 640 480)
                @(resolution_button 800 600)
                @(resolution_button 1024 768)
                @(resolution_button 1400 1050)
                @(resolution_button 1600 1200)
                @(resolution_button 1920 1440)
                @(resolution_button 2800 2100)
                @(resolution_button 3200 2400)
                ui_strut 2
            ] 1 [ // 16:10
                @(resolution_button 640 400)
                @(resolution_button 1024 640)
                @(resolution_button 1440 900)
                @(resolution_button 1600 1000)
                @(resolution_button 1680 1050)
                @(resolution_button 1920 1200)
                @(resolution_button 2560 1600)
                @(resolution_button 2880 1800)
                @(resolution_button 3200 2000)
                @(resolution_button 3840 2400)
            ] 2 [ // 16:9
                @(resolution_button 1280 720)
                @(resolution_button 1366 768)
                @(resolution_button 1600 900)
                @(resolution_button 1920 1080)
                @(resolution_button 2048 1440)
                @(resolution_button 3200 1800)
                @(resolution_button 3840 2160)
                ui_strut 3
            ] 3 [ // 5:4
                @(resolution_button 600 480)
                @(resolution_button 1280 1024)
                @(resolution_button 1600 1280)
                @(resolution_button 2560 2048)
                ui_strut 6
            ] 4 [ // 5:3
                @(resolution_button 800 480)
                @(resolution_button 1280 768)
                ui_strut 8
            ] -1 [ // Custom
                customw = $scr_w
                customh = $scr_h
                ui_list [
                    ui_textfield customw 4 [scr_w $customw]
                    ui_textfield customh 4 [scr_h $customh]
                ]
                ui_strut 8.75
            ]
        ]
    ]
]

display_options = [
    ui_list [
        ui_strut 1
        ui_list [
        
            ui_list [ ui_strut 50 ]
        
            ui_list [
                ui_checkbox "Fullscreen" fullscreen 1 0; ui_strut 1.5
                ui_checkbox "V-Sync"     vsync      1 0
            ]
            
            ui_strut 0.5
            
            ui_list [
                ui_text "Resolution:";                   ui_strut 1.5
                ui_button (format "%1x%2" $scr_w $scr_h) "showgui resolution_selector"
            ]
            
            ui_strut 0.5
            
            ui_list [
                ui_font "normal" [           ui_text "Gamma"               ]; ui_strut 0.5
                ui_center [ ui_font "tiny" [ ui_text "^fa(Default: 100)" ] ]
            ]
            ui_slider gamma
                
            ui_strut 1
            
            ui_list [ 
                ui_font "normal" [           ui_text "Full-Scene Anti-Aliasing" ]; ui_strut 0.5
                ui_center [ ui_font "tiny" [ ui_text "^fa(Default: -1)"       ] ]
            ]
            ui_list_slider fsaa "-1 0 2 4 8 16"
            
            ui_strut 0.25
            
            ui_list [
                ui_font "normal" [           ui_text "Z-Buffer Depth"    ]; ui_strut 0.5
                ui_center [ ui_font "tiny" [ ui_text "^fa(Default: 0)" ] ]
            ]
            ui_list_slider depthbits "0 16 24 32"
            
            ui_strut 0.25
            
            ui_list [ 
                ui_font "normal" [           ui_text "Anisotropic Filtering" ]; ui_strut 0.5
                ui_center [ ui_font "tiny" [ ui_text "^fa(Default: 0)"     ] ]
            ]
            ui_list_slider anisotropy "0 2 4 8 16"
        ]
    ]
]

graphics_options = [
    ui_text "Performance Key: ^fgFast^f~, ^fyModerate^f~, ^foSlow and Pretty^f~"

    ui_strut 0.5
    ui_list [
        ui_text "Blood and Gore:"
        ui_spring
        ui_checkbox "Splatter" bloodscale
        ui_spring
        ui_checkbox "Gibs" gibscale
        ui_spring
        if $gibscale [
            ui_checkbox "Sparks" bloodsparks
        ] [
            ui_text "Sparks" "textures/checkbox" 0x808080 0x666666
        ]
        ui_spring
    ]

    ui_bar
    ui_list [
        ui_list [
            ui_list [
                ui_strut 2.4
                ui_text "Shaders"
            ]
            ui_list [
                ui_strut 2.4
                ui_text "Water"
            ]
            ui_list [
                ui_strut 2.4
                ui_text "Waterfalls"
            ]
            ui_checkbox "^foSoft Shadows" shadowmap
            if $glare [
                glarepreset = 0
                if (= $glarescale 1) [
                    if (= $blurglare 4) [glarepreset = 1]
                    if (= $blurglare 7) [glarepreset = 3]
                ]
                if (= $glarescale 2) [
                    if (= $blurglare 3) [glarepreset = 2]
                    if (= $blurglare 7) [glarepreset = 4]
                ]
            ]
            ui_checkbox "^foGlare" glare // glare checkbox
            ui_checkbox "^foMotion Blur" motionblur // motion blur checkbox
            ui_checkbox "^foGrass Fade" grass // grass fade checkbox
            ui_checkbox "^fgDynamic Lights" maxdynlights 3 0 // dynamic lights checkbox
            ui_checkbox "^fySoft Particles" depthfx // soft particles checkbox
            ui_checkbox "^fgGlass Reflection" glassenv // glass reflection checkbox
            ui_checkbox "^fgDecals" decals // decals checkbox
            ui_checkbox "^fgFix T-Joints (World Sparklies)" filltjoints // fix t-joints checkbox
            ui_list [
                ui_strut 2.4
                ui_text "Textures"
            ]
            ui_list [
                ui_strut 2.4
                ui_text "Models"
            ]
        ]
        ui_spring 1
        ui_bar
        ui_spring 1
        ui_list [
            // shaders
            ui_radiobutton "Low Detail" shaderdetail 1
            // water
            ui_checkbox "Refraction" waterrefract
            // waterfalls
            ui_checkbox "Refraction" waterfallrefract
            // shadows
            if $shadowmap [
                ui_radiobutton "^fyMedium Quality" shadowmapsize 9 [blurshadowmap 1]
            ] [ ui_checkbox "^fgBlob Shadows" blobs ]
            // glare
            if $glare [
                ui_radiobutton "^fySubtle" glarepreset 1 [blurglare 4; glarescale 1]
            ] [ ui_no_hit_fx [ ui_text "^fASubtle" radiodisable ] ]
            // motion blur
            if $motionblur [
                ui_radiobutton "^foSubtle" motionblurscale 0.5
            ] [ ui_no_hit_fx [ ui_text "^fASubtle" radiodisable ] ]
            // grass
            if $grass [
                ui_radiobutton "^fyQuick" grassdist 128
            ] [ ui_no_hit_fx [ ui_text "^fAQuick" radiodisable ] ]
            // dynamic lights
            if $maxdynlights [
                ui_radiobutton "^fgMedium Quality" maxdynlights 3
            ] [ ui_no_hit_fx [ ui_text "^fAMedium Quality" radiodisable ] ]
            // soft particles
            if $depthfx [
                ui_radiobutton "^fgLow Quality" depthfxsize 7 [blurdepthfx 1]
            ] [ ui_no_hit_fx [ ui_text "^fALow Quality" radiodisable ]]
            // glass reflection
            ui_text ""
            // decals
            if $decals [
                ui_radiobutton "^fgMedium Quality" maxdecaltris 512
            ] [ ui_no_hit_fx [ ui_text "^fAMedium Quality" radiodisable ] ]
            // t-joints
            ui_text ""
            // textures
            ui_radiobutton "^fqLow Quality" maxtexsize 256
            // models
            ui_checkbox "^fgReflection" envmapmodels
        ]
        ui_strut 1
        ui_list [
            // shaders
            ui_radiobutton "^fyHigh Detail" shaderdetail 3
            // water
            ui_checkbox "^foReflection" waterreflect
            // waterfalls
            ui_checkbox "^fgReflection" waterfallenv
            // shadows
            if $shadowmap [
                ui_radiobutton "^foHigh Quality" shadowmapsize 10 [blurshadowmap 2]
            ] [ ui_text "" ]
            // glare
            if $glare [
                ui_radiobutton "^fyGlowy" glarepreset 2 [blurglare 3; glarescale 2]
            ] [ ui_no_hit_fx [ ui_text "^fAGlowy" radiodisable ] ]
            // motion blur
            if $motionblur [
                ui_radiobutton "^foModerate" motionblurscale 1
            ] [ ui_no_hit_fx [ ui_text "^fAModerate" radiodisable ] ]
            // grass
            if $grass [
                ui_radiobutton "^fyModerate" grassdist 256
            ] [ ui_no_hit_fx [ ui_text "^fAModerate" radiodisable ] ]
            // dynamic lights
            if $maxdynlights [
                ui_radiobutton "^fyHigh Quality" maxdynlights 5
            ] [ ui_no_hit_fx [ ui_text "^fAHigh Quality" radiodisable ] ]
            // soft particles
            if $depthfx [
                ui_radiobutton "^fyMedium Quality" depthfxsize 10 [ blurdepthfx 0 ]
            ] [ ui_no_hit_fx [ ui_text "^fAMedium Quality" radiodisable ] ]
            // glass reflection
            ui_text ""
            // decals
            if $decals [
                ui_radiobutton "^fgHigh Quality" maxdecaltris 1024
            ] [ ui_no_hit_fx [ ui_text "^fAHigh Quality" radiodisable ] ]
            // t-joints
            ui_text ""
            // textures
            ui_radiobutton "^fyMedium Quality" maxtexsize 512
            // models
            ui_checkbox "^fyBumpmap" bumpmodels
        ]
        ui_strut 1
        ui_list [
            // -shaders
            ui_text ""
            // water
            ui_checkbox "^fgEnvmap" waterenvmap
            // -waterfalls
            ui_text ""
            // -shadows
            ui_text ""
            // glare
            if $glare [
                ui_radiobutton "^foSoft" glarepreset 3 [blurglare 7; glarescale 1]
            ] [ ui_no_hit_fx [ ui_text "^fASoft" radiodisable ] ]
            // motion blur
            ui_text ""
            // grass
            if $grass [
                ui_radiobutton "^foSlow" grassdist 512
            ] [ ui_no_hit_fx [ ui_text "^fASlow" radiodisable ] ]
            // dynamic lights
            ui_text ""
            // soft particles
            if $depthfx [
                ui_radiobutton "^foHigh Quality" depthfxsize 12 [blurdepthfx 0]
            ] [ ui_no_hit_fx [ ui_text "^fAHigh Quality" radiodisable ] ]
            // glass reflection
            ui_text ""
            // decals
            ui_text ""
            // t-joints
            ui_text ""
            // textures
            ui_radiobutton "^foHigh Quality" maxtexsize 0
        ]
        ui_strut 1
        ui_list [
            // -shaders
            ui_text ""
            // -water
            ui_text ""
            // -waterfalls
            ui_text ""
            // -shadows
            ui_text ""
            // glare
            if $glare [
                ui_radiobutton "^foIntense" glarepreset 4 [blurglare 7; glarescale 2]
            ] [ ui_no_hit_fx [ ui_text "^fAIntense" radiodisable ] ]
            // motionblur
            ui_text ""
            // grass
            ui_text ""
            // dynamic lights
            ui_text ""
            // soft particles
            ui_text ""
        ]
    ]
]

advanced_graphics_options = [
    ui_list [
        ui_strut 10
        ui_text "Death Animation:"
        ui_strut 1
        ui_radiobutton "On" deathanim 2
        ui_strut 1
        ui_radiobutton "Not in Duel/Survivor" deathanim 3
        ui_strut 1
        ui_radiobutton "Never" deathanim 0
    ]

    ui_strut 1

    ui_list [
        ui_strut 10
        ui_list [
            ui_font "emphasis" [ ui_text "3D-FX" ]
            ui_small_spacer
            ui_button "(effect OFF)" "clearpostfx"
            ui_button "bloom (subtle: 30%)" "bloom 0.3"
            ui_button "bloom (bright: 55%)" "bloom 0.55"
            ui_button "bloom (intense: 80%)" "bloom 0.8"
            ui_button "rotoscope" "rotoscope 1"
            ui_button "rotoscope + blur3" "rotoscope 1 1"
            ui_button "rotoscope + blur5" "rotoscope 1 2"
            ui_button "sharpen" "setpostfx sharpen"
            ui_button "sobel" "setpostfx sobel"
            ui_button "invert" "setpostfx invert"
            ui_button "gbr" "setpostfx gbr"
            ui_button "bw" "setpostfx bw"
            ui_button "blur3" "setpostfx hblur3; addpostfx vblur3"
            ui_button "blur5" "setpostfx hblur5; addpostfx vblur5"
        ]
        ui_strut 5
        ui_list [
            ui_font "emphasis" [ ui_text "POST-FX" ]
            ui_small_spacer
            ui_button "(effect OFF)" "viewtype 0"
            ui_button "side-by-side" "viewtype 1"
            ui_button "no glasses" "viewtype 2"
            ui_button "anaglyph red/blue (R/B glasses)" "viewtype 3"
            ui_button "anaglyph red/cyan blend (R/G glasses)" "viewtype 4"
            ui_button "anaglyph red/cyan (R/C glasses)" "viewtype 5"
            ui_button "polarized" "viewtype 6"
        ]
    ]
]

general_gameplay_options = [
    // Select Player Perspective
    ui_list [
        ui_text "Player Perspective: "
        ui_radiobutton "First-Person" thirdperson 0
        ui_strut 1
        ui_radiobutton "Third-Person" thirdperson 1
    ]
    ui_strut 3
    ui_text "Player Color Tones in Team Games:"
    playertone = 0
    if (&& (= $playerovertone 0) (= $playerundertone 1)) [playertone = 1]
    if (&& (= $playerovertone 0) (= $playerundertone 2)) [playertone = 2]
    if (&& (= $playerovertone 0) (= $playerundertone 5)) [playertone = 3]
    ui_list [
        ui_radiobutton "Profile And Team" playertone 1 [playerovertone 0; playerundertone 1]
        ui_strut 2
        ui_radiobutton "Team Only" playertone 2 [playerovertone 0; playerundertone 2]
        ui_strut 2
        ui_radiobutton "Mixed Color" playertone 3 [playerovertone 0; playerundertone 5]
    ]
    ui_strut 0.5
    ui_checkbox "Show Vanity Items" vanitymodels
    ui_strut 1
    ui_list [
        ui_list [
            ui_text "Skip Weapons:"
            ui_strut 2
        ]
        ui_strut 5
        ui_list [
            ui_checkbox "^f($pistoltex)Pistol" skippistol 10 0 [] $pistolcolour
            ui_checkbox "^f($clawtex)Claw" skipclaw 10 0 [] $clawcolour
        ]
        ui_strut 5
        ui_list [
            ui_checkbox "^f($grenadetex)Grenades" skipgrenade 10 0 [] $grenadecolour
            ui_checkbox "^f($minetex)Mines" skipmine 10 0 [] $minecolour
            ui_checkbox "^f($rockettex)Rockets" skiprocket 10 0 [] $rocketcolour
        ]
    ]
    ui_strut 0.5
    ui_center [ui_checkbox "Ignore Pickups of Skipped Weapons" skippickup]
    ui_strut 1
    ui_list [
        ui_text "Weapon Zoom Level:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider zoomlevel 0 5
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Spectator/Edit Float Speed:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider floatspeed 1 2000
        ]
    ]
]

first_person_options = [
    ui_checkbox "First-Person Bob Effect" firstpersonbob 1 0
    ui_strut 0.5
    ui_checkbox "First-Person Sway Effect" firstpersonsway 1 0
    ui_strut 0.5
    ui_list [
        ui_text "Character Opacity:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            firstpersonblendstorage = (*f $firstpersonblend 100)
            ui_slider firstpersonblendstorage 0 100 [ firstpersonblend (divf $firstpersonblendstorage 100) ] 0 0 0xFFFFFF 1
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "FOV:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider firstpersonfov 90 150
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Editing FOV:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider editfov 1 179
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Spectator FOV:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider specfov 1 179
        ]
    ]
]

third_person_options = [
    ui_list [
        ui_text "View Distance:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider thirdpersondist 1 20
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Side:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider thirdpersonside -20 20
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Cursor: "
        ui_radiobutton "Auto-Correcting" thirdpersoncursor 1
        ui_strut 1
        ui_radiobutton "Static" thirdpersoncursor 0
    ]
    ui_strut 0.5
    ui_list [
        ui_text "Character Opacity:"
        ui_spring 1
        ui_list [
            ui_strut 25 1
            thirdpersonblendstorage = (*f $thirdpersonblend 100)
            ui_slider thirdpersonblendstorage 0 100 [ thirdpersonblend (divf $thirdpersonblendstorage 100) ] 0 0 0xFFFFFF 1
        ]
    ]
    ui_strut 0.5
    ui_list [
        ui_text "FOV:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider thirdpersonfov 90 150
        ]
    ]
]

advanced_gameplay_options = [
    ui_list [
        ui_text "Brighten Models:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider fullbrightmodels 0 200 [] 0 0 0xFFFFFF 1
        ]
    ]
    ui_strut 0.5
    hintslider = (*f 100 $playerhintblend)
    ui_list [
        ui_text "Glow Effect:"
        ui_strut 1
        ui_spring 1
        ui_list [
            ui_strut 25 1
            ui_slider hintslider 0 100 [playerhintblend (*f 0.01 $hintslider)] 0 0 0xFFFFFF 1
        ]
    ]
]

sound_options = [
    ui_list [
        ui_strut 70 1

        ui_text "Master Volume"
        ui_slider mastervol

        ui_big_spacer

        ui_text "Sound Volume"
        ui_slider soundvol

        ui_big_spacer

        ui_text "Music Volume"
        ui_slider musicvol
    ]
]

advanced_sound_options = [
    ui_list [
        ui_list [
            ui_list [ ui_text "Allocated Sound Channels:"; ui_font "little" [ ui_text "(Allocation, NOT the number of speakers)" ] ]
            ui_slider soundachans
            ui_text "Sound Frequency"
            ui_list_slider soundfreq "11025 22050 44100"
            ui_text "Sound Buffer Length"
            ui_slider soundbufferlen
        ]
    ]
    ui_strut 1

    ui_list [
        ui_list [
            ui_text "In-Game Music:"
            ui_text "Edit Mode Music:"
        ]
        ui_strut 2
        ui_list [
            ui_list [
                ui_radiobutton "Off" musictype 0
                ui_strut 1
                ui_radiobutton "Mapmusic" musictype 1
                ui_strut 1
                ui_radiobutton "random" musictype 2
            ]
            ui_list [
                ui_radiobutton "Off" musicedit 0
                ui_strut 1
                ui_radiobutton "Mapmusic" musicedit 1
                ui_strut 1
                ui_radiobutton "Random" musicedit 2
            ]
        ]
    ]
]

keyboard_options = [
    ui_center [
        // ui_list [ ui_strut 28 ]
        ui_list [
            ui_strut 0.5
            ui_text "click a key field and press the desired keys to bind" 
            ui_text "    then press Esc to deselect the input field"
            ui_strut 1
            ui_list [
                ui_text "state:"
                ui_strut 1
                loop i 4 [ ui_radiobutton (at $bindtypes $i) curbindtype $i; ui_strut 2 ]
                //ui_checkbox "show default bind if not found" curbindshow
            ]
            ui_strut 1
            curbindsign = (at $bindcalls $curbindtype)
            curbindcall = (concatword $curbindsign bind)
            curbindacts = (concatword $curbindsign bindactions)
            curbindtits = (concatword $curbindsign bindtitles)
            curbindsrch = (concatword search $curbindsign binds)
            //ui_loop_list_split n 2 $[@curbindacts] [
            ui_loop_scrollbar gli (listlen $[@curbindacts]) 10 50 [
                n = (at $[@curbindacts] $gli) 
                ui_list [
                    ui_text (concatword (at $[@curbindtits] $gli) " ") 
                    [newbinds@curbindsign@gli] = ([@curbindsrch] $n 0 "" "" " " " " @curbindshow)
                    ui_spring
                    ui_keyfield [newbinds@curbindsign@gli] -24 [
                        oldbinds = ([@@curbindsrch] @n 0 "" "" " " " "  @@curbindshow)
                        looplist j $oldbinds [echo @@curbindcall " " $j; @@curbindcall $j ""]
                        looplist j $[newbinds@@curbindsign@@gli] [echo @@curbindcall $j " " @@n; @@curbindcall $j [@@@n]]
                    ]
                ]
            ]// [ ui_strut 2 ]
            ui_strut 0.5
            ui_button "^frrestore all default key binds" [show_ui resetcontrols]
        ]
    ]
]

mouse_options = [
    ui_center [
        ui_list [
            ui_strut 3
            ui_strut 50 1
            ui_text "mouse overall sensitivity"
            ui_slider sensitivity 1 100
            ui_strut 1
            ui_text "mouse yaw sensitivity"
            ui_slider yawsensitivity 1 100
            ui_strut 1
            ui_text "mouse pitch sensitivity"
            ui_slider pitchsensitivity 1 100
            ui_strut 1
            ui_checkbox "invert y-axis" mouseinvert
            ui_strut 1.5
            ui_text "Tip: You may want to adjust your system settings"
            ui_text "      for accelerated mouse movement."
        ]
    ]
]

advanced_control_options = [
    ui_strut 1
    ui_text "Use below field to select some keys or mouse buttons,"
    ui_text "then press Esc to deselect the key field."
    ui_keyfield curkey -50 [] -1 0 "" "" 1
    ui_text "Click a bind to edit it, right-click to clear a bind action."
    // use the latest key pressed only
    if (> (listlen $curkey) 1) [curkey = (at $curkey (- (listlen $curkey) 1))]
    // ui_text [binds for the latest key pressed: @curkey]
    ui_strut 1
    ui_strut 50 1
    curbind = (getbind $curkey)
    if $curkey [
        if $curbind [
            ui_box 0x333333 0xffffff [
                ui_button [regular bind for @curkey:] [saycommand /bind @curkey "["@curbind"]"]" [saycommand /bind @curkey "[]"]
                ui_text $curbind "" -1 -1 800
            ]
            // look up universal delta
            if (=s "universaldelta" (at $curbind 0)) [
                ui_strut 0.5
                ui_box 0x333333 0xffffff [
                    ui_text "this implies the following scroll actions:"
                    looplist i [game spec wait edit dead] [
                        d = (format "delta_%1_0" $i)
                        if (getalias $d) [
                            ui_strut 0.5
                            ui_button [@d =] [saycommand /@d = "[" $@d "]"]
                            ui_text $$d "" -1 -1 1200
                        ]
                    ]
                    ui_text "and more actions with modifier keys"
                ]
            ]
            // look up modifiers for universal delta
            if (=s "domodifier" (at $curbind 0)) [
                ui_strut 0.5
                ui_box 0x333333 0xffffff [
                    ui_text "this implies the following scroll actions:"
                    looplist i [game spec wait edit dead] [
                        d = (format "delta_%1_%2" $i (at $curbind 1))
                        if (getalias $d) [
                            ui_button [@d =] [saycommand /@d = "[" $@d "]"]
                            ui_text $$d "" -1 -1 1200
                        ]
                    ]
                ]
            ]
        ] [
            ui_button [no regular bind on @curkey. Click here to add one.] [saycommand /bind @curkey "["]
        ] 
        ui_strut 1
        // same thing for other bind types, mainly editbinds
        looplist i [edit spec wait] [
            [curbind@i] = ([get@[i]bind] $curkey) 
            if (!=s $curbind $[curbind@i]) [
                ui_box 0x333333 0xffffff [
                    ui_button [@i bind for @curkey:] [saycommand /@[i]bind @curkey "["@[curbind@i]"]"] [saycommand /@[i]bind @curkey "[]"]
                    ui_text $[curbind@i] "" -1 -1 1200
                ]
                // look up modifiers for universal delta
                if (=s "domodifier" (at $[curbind@i] 0)) [
                    ui_strut 0.5
                    ui_box 0x333333 0xffffff [
                        ui_text "this implies the following scroll actions:"
                        looplist j [game spec wait edit dead] [
                            d = (format "delta_%1_%2" $j (at $[curbind@i] 1))
                            if (getalias $d) [
                                ui_button [@d =] [saycommand /@d = "[" $@d "]"]
                                ui_text $$d "" -1 -1 1200
                            ]
                        ]
                    ]
                ]
            ] [
                ui_button [no @i bind on @curkey. Click here to add one.] [saycommand /@[i]bind @curkey "["]
            ] 
            ui_strut 1
        ] 
    ] 
]
